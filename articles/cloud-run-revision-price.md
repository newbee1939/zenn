---
title: "Cloud Run のリビジョンと料金について💰"
emoji: "💸"
type: "tech"
topics:
  - "cloudrun"
  - "tips"
  - "googlecloud"
  - "クラウド"
  - "finops"
published: true
published_at: "2025-02-26 17:00"
---

## Cloud Run のリビジョンとは？

Cloud Run のデプロイ履歴を保持する機能です。

![](https://storage.googleapis.com/zenn-user-upload/7337aa5c2fae-20250225.png)

## Cloud Run のリビジョンと料金について

Cloud Run のリビジョンで料金が発生するパターンには、以下の 2 種類があります。

一つ目は、以下のパターンです：

- **リビジョン レベルの**最小インスタンス数が 1 以上
- 以下のいずれかに当てはまる
  - **リビジョンにタグが付いている（タグ付きリビジョン）**
  - リビジョンがトラフィック分割で参照される

二つ目は、以下のパターンです：

- **サービス レベルの**最小インスタンス数が 1 以上
- リビジョンがトラフィック分割で参照される

**最小インスタンスの設定がリビジョンレベルの場合、トラフィック分割での参照有無にかかわらず、タグ付きリビジョンの各リビジョンに対して料金が発生**します。

## タグ付きリビジョンとは？

リビジョンを識別・管理するために、タグを付与できる機能です。

![](https://storage.googleapis.com/zenn-user-upload/75d2d4081c94-20250225.png)

## Cloud Run の最小インスタンス数について

Cloud Run の最小インスタンス数は、以下の 2 種類に分類されます：

- **サービスレベル**の最小インスタンス数
- **リビジョンレベル**の最小インスタンス数

それぞれの特徴は以下の通りです：

- **リビジョンレベル**の最小インスタンス数
  - リビジョンのデプロイ時に設定が有効になります
- **サービスレベル**の最小インスタンス数
  - 新しいリビジョンのデプロイを待たずに設定が有効になります

## Google はサービスレベルでの設定を推奨

Google は、最小インスタンス数について、原則として**サービスレベルでの設定を推奨**しています。

> 最小インスタンス数はサービスレベルで適用し、サービスレベルとリビジョン レベルの最小インスタンス数を組み合わせることは避けることをおすすめします

参考: [サービスレベルとリビジョン レベルでの最小インスタンス数の適用](https://cloud.google.com/run/docs/configuring/min-instances?hl=ja#service-vs-revision-level)

Cloud Run で最小インスタンス数を設定する際は、サービスレベルでの設定を優先して検討することをお勧めします。

## まとめ: Cloud Run のリビジョンと料金について

Cloud Run のリビジョンにおける料金発生パターンは、以下の 2 種類に整理されます：

一つ目は、以下のパターンです：

- **リビジョン レベルの**最小インスタンス数が 1 以上
- 以下のいずれかに当てはまる
  - **リビジョンにタグが付いている（タグ付きリビジョン）**
  - リビジョンがトラフィック分割で参照される

二つ目は、以下のパターンです：

- **サービス レベルの**最小インスタンス数が 1 以上
- リビジョンがトラフィック分割で参照される

**最小インスタンスの設定がリビジョンレベルの場合、トラフィック分割での参照有無にかかわらず、タグ付きリビジョンの各リビジョンに対して料金が発生する**点に注意しましょう。

## 参考資料

- [サービスの最小インスタンス数を設定する](https://cloud.google.com/run/docs/configuring/min-instances?hl=ja#yaml_1)
- [テスト、トラフィックの移行、ロールバックにタグを使用する](https://cloud.google.com/run/docs/rollouts-rollbacks-traffic-migration?hl=ja#tags)
